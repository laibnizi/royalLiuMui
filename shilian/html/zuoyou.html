<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
	</head>

	
		<script src="../js/mui.min.js"></script>
		<script type="text/javascript">
			mui.init()
		</script>
	
<body >
	<header class="mui-bar mui-bar-nav" style="background-image: url(../img/16010.jpg);">
	    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
	    <h1 class="mui-title" style="color: #00FFFF;">我把爱铺成蓝天</h1>
	    <input onclick="operateAnimation(this)" id="operate" type="button" value="暂停"  style="float: right;background-image: url(../img/16010.jpg);color: #00FFFF;"/>
	</header>
		<!--<div id="test"></div>-->
		
		<canvas id="c"></canvas>
		<script>
			var test = document.getElementById("test");
			var str = "str";

			var c = document.getElementById("c");
			var ctx = c.getContext("2d");
			/** 这里控制显示的宽度和高度，且涵盖所有浏览器 */
			c.width = window.innerWidth ||
				document.documentElement.clientWidth ||
				document.body.clientWidth;
			c.height = window.innerHeight ||
				document.documentElement.clientHeight ||
				document.body.clientHeight;
			//c.width = 300;
			//c.height = 300;

			//ctx.fillStyle = "1cba9c";
			//ctx.fillRect(0,0,100,100);
			//ctx.fillStyle = "ecb69c";
			//ctx.fillText("雨滴",10,90);

			var chinese = "你要开心❀❤";
			chinese = chinese.split("");

			var fsize = 15;
			columns = c.width / fsize;

			var drops = [];
			for(var x = 0; x < columns; x++) {
				drops[x] = 0;
			}

			function draw() {
				ctx.fillStyle = "rgba(0,0,0,0.09)";
				ctx.fillRect(0, 0, c.width, c.height);

				ctx.fillStyle = "#00FFFF";
				ctx.font = fsize + "px arial"; // arial is font.

				for(var i = 0; i < drops.length; i++) {
					var text = chinese[Math.floor(Math.random() * chinese.length)];
					ctx.fillText(text, i * fsize, drops[i] * fsize);

					drops[i]++;
					if(drops[i] * fsize > c.height && Math.random() > 0.9) {
						drops[i] = 0;
					}

					str = drops[i] + ",";
				}
				test.innerText = columns + " , i:" + str; // 测试数据

			}
			/// draw();
			var intervalId = setInterval(draw, 50); // 这里修改控制速度

			// 测试效果开始/暂停
			function operateAnimation(objBtn) {
				var operate = document.getElementById("operate");

				if(objBtn.value == "开始") {
					objBtn.value = "暂停";
					intervalId = setInterval(draw, 30);
				} else {
					objBtn.value = "开始";
					clearInterval(intervalId);
				}
				return false;
			}
		</script>
		
	</body>
</html>